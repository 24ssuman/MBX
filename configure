#!/bin/bash

rm -f include.sh

if [ -z "$FFTW_HOME" ]; then
  echo "Where are the include and lib folders for FFTW?"
  read FFTW_HOME
fi

if [ -z "$GSL_ROOT_DIR" ]; then
  echo "Where are the include and lib folders for GLS?"
  read GSL_ROOT_DIR
fi

if [ -z "$CMAKE_EXE" ]; then
  echo "Where is the CMake executable?"
  read CMAKE_EXE
  if [ "$CMAKE_EXE" == "" ]; then
    CMAKE_EXE=cmake
  fi
fi

if [ -z "$MBX_CXX" ]; then
  echo "Which C++ compiler do you want to use?"
  read MBX_CXX
fi 

if [ -z "$MBX_CC" ]; then
  echo "Which C compiler do you want to use?"
  read MBX_CC
fi 

if [ -z "$USE_MPI" ]; then
  echo "Do you want to compile with MPI? If you are not going to use MBX+LAMMPS, please set it to 0. Otherwise, set it to 1"
  read USE_MPI
fi

if [ -z "$USE_OPENMP" ]; then
  echo "USE_OPENMP is not set. Defaulted to 1. "
  USE_OPENMP=1
fi

if [ -z "$OPT_LEVEL" ]; then
  echo "Which optimization level do you want to use? [0/1/2/3]"
  read n
  OPT_LEVEL="-O$n"
fi


# Generate the include.sh file
cat << EOF > include.sh
#!/bin/bash

export FFTW_HOME=$FFTW_HOME
export GSL_ROOT_DIR=$GSL_ROOT_DIR
export CMAKE_EXE=$CMAKE_EXE
export MBX_CXX=$MBX_CXX
export MBX_CC=$MBX_CC
export USE_MPI=$USE_MPI
export USE_OPENMP=$USE_OPENMP
export OPT_LEVEL=$OPT_LEVEL

EOF

